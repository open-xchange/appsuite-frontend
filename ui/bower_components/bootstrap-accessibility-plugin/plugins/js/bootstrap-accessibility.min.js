/*! bootstrap-accessibility-plugin - v1.0.2 - 2015-02-19
* https://github.com/paypal/bootstrap-accessibility-plugin
* Copyright (c) 2015 PayPal Accessibility Team; Licensed BSD */
!function($){"use strict";function a11yDropdown(){var toggle=this,root=toggle.parent(),menu=root.find("ul"),items=menu.find("li");return toggle.attr({"aria-haspopup":!0,"aria-expanded":!1}),menu.not("[role]").attr({role:"menu"}),items.filter(":not([role])").attr({role:"presentation"}),items.find("a").attr({tabIndex:"-1"}).filter(":not([role])").attr({role:"menuitem"}),root.on({"shown.bs.dropdown":function(e,args){toggle.attr({"aria-expanded":!0});var el=args.relatedTarget;$(el).data("preventFocus")||setTimeout(function(){$('a[role^="menuitem"]',items).first(":visible").focus()},200),$(el).removeData("preventFocus")},"hidden.bs.dropdown":function(){toggle.attr("aria-expanded","false")}}),this}function a11yCarousel(){var $this=$(this),prev=$this.find('[data-slide="prev"]'),next=$this.find('[data-slide="next"]'),$options=$this.find(".item"),$listbox=$options.parent();$this.attr({"data-interval":!1,"data-wrap":!1}),$listbox.attr("role","listbox"),$options.attr("role","option"),prev.attr("role","button").append($('<span class="sr-only">').text("Previous")),next.attr("role","button").append($('<span class="sr-only">').text("Next")),$options.each(function(){var item=$(this);item.attr(item.hasClass("active")?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"})})}var uniqueId=function(prefix){return(prefix||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)},removeMultiValAttributes=function(el,attr,val){var describedby=(el.attr(attr)||"").split(/\s+/),index=$.inArray(val,describedby);-1!==index&&describedby.splice(index,1),describedby=$.trim(describedby.join(" ")),describedby?el.attr(attr,describedby):el.removeAttr(attr)},alertConstructor=$.fn.dropdown.Constructor,alertFn=$.fn.dropdown;$.fn.alert=function(){return $(this).attr({role:"alert"}),alertFn.apply(this,arguments)},$.fn.alert.Constructor=alertConstructor;var showTooltip=$.fn.tooltip.Constructor.prototype.show,hideTooltip=$.fn.tooltip.Constructor.prototype.hide;$.fn.tooltip.Constructor.prototype.show=function(){showTooltip.apply(this,arguments);var $tip=this.tip(),tooltipID=$tip.attr("id")||uniqueId("ui-tooltip");$tip.attr({role:"tooltip",id:tooltipID}),this.$element.attr({"aria-describedby":tooltipID})},$.fn.tooltip.Constructor.prototype.hide=function(){return hideTooltip.apply(this,arguments),removeMultiValAttributes(this.$element,"aria-describedby",this.tip().attr("id")),this};var showPopover=$.fn.popover.Constructor.prototype.setContent,hidePopover=$.fn.popover.Constructor.prototype.hide;$.fn.popover.Constructor.prototype.setContent=function(){showPopover.apply(this,arguments);var $tip=this.tip(),tooltipID=$tip.attr("id")||uniqueId("ui-tooltip");$tip.attr({role:"alert",id:tooltipID}),this.$element.attr("aria-describedby",tooltipID)},$.fn.popover.Constructor.prototype.hide=function(){return hidePopover.apply(this,arguments),removeMultiValAttributes(this.$element,"aria-describedby",this.tip().attr("id")),this},$(document).on("focusout.dropdown.data-api",".dropdown-menu",function(){var that=this;setTimeout(function(){$.contains(that,document.activeElement)||$(that).parent().removeClass("open").find("[data-toggle=dropdown]").attr({"aria-expanded":!1})},150)}).on("keydown.bs.dropdown.data-api","[data-toggle=dropdown], [role=menu]",function(e){32==e.which&&$(e.target).is("a")&&$(e.target).click()}).on("mousedown.bs.dropdown.data-api","[data-toggle=dropdown]",function(){$(this).data("preventFocus",!0)});var dropdownConstructor=$.fn.dropdown.Constructor,dropdownFn=$.fn.dropdown;$.fn.dropdown=function(option){return $(this).data("bs.dropdown")||a11yDropdown.apply(this),"string"==typeof option&&"toggle"===option&&$(this).data("preventFocus",!0),dropdownFn.apply(this,arguments)},$.fn.dropdown.Constructor=dropdownConstructor,$.fn.modal.Constructor.prototype._hide=$.fn.modal.Constructor.prototype.hide,$.fn.modal.Constructor.prototype._show=$.fn.modal.Constructor.prototype.show,$.fn.modal.Constructor.prototype.hide=function(){var modalOpener=this.$element.parent().find('[data-target="#'+this.$element.attr("id")+'"]');$.fn.modal.Constructor.prototype._hide.apply(this,arguments),modalOpener.focus()},$.fn.modal.Constructor.prototype.show=function(){$(".modal-dialog",this).attr({role:"document"}),$.fn.modal.Constructor.prototype._show.apply(this,arguments)};var slideCarousel=$.fn.carousel.Constructor.prototype.slide;$.fn.carousel.Constructor.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type]();slideCarousel.apply(this,arguments),$active.one($.support.transition.end,function(){$active.attr({"aria-selected":!1,tabIndex:"-1"}),$next.attr({"aria-selected":!0,tabIndex:"0"})})},$(document).on("keydown.carousel.data-api","div[role=option]",function(e){var $this=$(this),$ul=$this.closest("div[role=listbox]"),$items=$ul.find("[role=option]"),$parent=$ul.parent(),k=e.which||e.keyCode,index=$items.index($items.filter(".active"));/(37|38|39|40)/.test(k)&&((37==k||38==k)&&($parent.carousel("prev"),index--,0>index?index=$items.length-1:$this.prev().focus()),(39==k||40==k)&&($parent.carousel("next"),index++,index==$items.length?index=0:$this.one($.support.transition.end,function(){$this.next().focus()})))});var carouselConstructor=$.fn.carousel.Constructor,carouselFn=$.fn.carousel;$.fn.carousel=function(){return $(this).data("bs.carousel")||a11yCarousel.apply(this),carouselFn.apply(this,arguments)},$.fn.carousel.Constructor=carouselConstructor}(jQuery);