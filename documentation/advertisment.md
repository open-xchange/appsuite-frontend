---
title: Advertisment
icon: fa-usd
keywords: monetization
---

AppSuite features a basic framework to help implementing ads for monetization.
Usually code snippets generated by some advertisment provider is meant to be used on static web sites.
Integrating it into a web application might not be straight forward.
That's why this framework has been created.
It defines some common areas to serve banners in different forms, it provides an API to refresh those banners on different events (e.g. app change, some timeout, …), and
it helps to integrate the code snippets needed to actually run the campaigns by the provider.

# Configuration

Configuration for the `io.ox/ads` framework must be provided by a plugin in the [namespace](components/plugins/01_create-plugins#namespace) `io.ox/ads`.

All registered plugins for `io.ox/ads` will get loaded and the return values of their modules will be handed as parameters for invocation
of the `inject` method (with `this` being bound to `$('head')`) as well as the `config` method of the extension point `io.ox/ads`.
It is therefore possible to customize this functionality by extending `io.ox/ads`.

When using the default implementation, custom modules should return an object containing two keys:

* `inject` - a String with valid HTML code which is to be appended to the head element
* `config` - the configuration is simply stored internally

The `config` object can contain arbitrary data.
The `changeModule` method of the `io.ox/ads` extension point will be invoked with the app name as first parameter and a [Baton] containing
a reference to the app and the `config` object.

The default implementation expects the `config` object to contain one key for each [area](advertisment#areas).
Values for these keys used in the default implementation should be an object defining:

* `html` - a String which is appended to the corresponding [area](advertisment#areas)
* `reloadAfter` - a number value, representing the time until the next refresh operation for an area is invoked
* `showInModules` - `falsy` value (always active) OR an array with app names to match against (e.g. `'io.ox/mail'`, …)
* `capabilities` - `falsy` value (always active) OR a string to be passed to capabilities.has method (e.g. `'webmail && !alone'`)

For every defined area, the `cleanup` method of the corresponding extension point will be invoked.
Active areas are determined by filtering using `showInModules` and `capabilities` options in the area configuration.
For every active area, the `draw` method of the extension point will be invoked. (See [Areas section](advertisment#areas))
The `reload` method of the area extension point will be invoked in a regular interval defined by the value of `reloadAfter`.
The configuration object will be passed to each method invocation.

# Areas

There is a list of [extension points](extension-points/01_general) defined, which can be used to place banners.
All points share a similar API:

```javascript
ext.point('the/points/name').extend({
    cleanup: function (baton) { /* do some cleanup */ },
    draw: function (baton) { /* append baton.data.html to the areas element, do other stuff */ },
    reload: function (baton) { /* trigger a reload of the banner */ }
});
```
The following extension points are defined in AppSuite Core UI and can be used to serve ads:

* io.ox/ads/leaderboard
* io.ox/ads/skyscraper
* io.ox/ads/mailDetail
* io.ox/ads/driveFolder
* io.ox/ads/portalBillboard
* io.ox/ads/mailSentOverlay

In order to activate one of these areas, a [custom plugin](components/plugins/01_create-plugins] is needed, shipping a configuration as described [above](#Configuration).

# Customization

The default behavior can be completely customized using well-known methods, [extension points](extension-points).
Despite the special points for the [areas](#Areas) as described above, it is possible to extend the general point `io.ox/ads`.
The API for this point looks like this:

```
ext.point('io.ox/ads').extend({
    changeModule: function (baton) { /* do something if user opens a new app/module */ },
    config: function (baton) { /* do something with the configuration */ },
    inject: function (baton) { /* inject the global JS from ad provider, this variable is bound to $('head') */ }
});
```

As a reference implementation and a starting point, [this](https://github.com/Open-Xchange-Frontend/adexample) project can be used.
The implementation is used to demonstrate the integration of a few [areas](#Areas) using a little more than just a minimal configuration.
